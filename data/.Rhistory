#env data checked for corr
oss.forest.corr <- randomForest(as.factor(oss_PA) ~ ., data=env_subset_corr, ntree = 5000, mtry = 5,
importance=TRUE, keep.forest=FALSE, na.action=na.omit)
ossForestData.corr <- as.data.frame(importance(oss.forest.corr))
ossForestData.corr <- ossForestData.corr[order(ossForestData.corr[,1]),]
ossForestData.corr$Var.Names <- row.names(ossForestData.corr)
colnames(ossForestData.corr) <- c("Absent","Present","MeanDec","IncNodePurity","Var.Names")
#ggplot
p6 <- ggplot(ossForestData.corr, aes(x = Var.Names, y = MeanDec)) +
geom_segment(aes(x = Var.Names, xend = Var.Names, y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "#66C2A5", "<10" = "#FFD700")) +
labs(color = "Range", size = "Node Purity") +
theme(
text = element_text(size = 20)
) +
labs(
title = "Variable Importance from Random Forest Model - OSS",
x = "Environmental Variables",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
#ggplot
p6 <- ggplot(ossForestData.corr, aes(x = Var.Names, y = MeanDec)) +
geom_segment(aes(x = Var.Names, xend = Var.Names, y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "#66C2A5", "<10" = "#FFD700")) +
labs(color = "Range", size = "Node Purity") +
theme(
text = element_text(size = 20)
) +
labs(
title = "Variable Importance from Random Forest Model - OSS",
x = "Environmental Variables",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
p6
View(ossForestData.corr)
rownames(ossForestData.corr)
new_names <- c("size_cl"="size class", "temp"="temp", "aspect"="aspect", "char_cl"="char class",
"precip_mm"="precip", "fwd_cov"="fine woody debris", "dwd_cov"="downed wood cover",
"dwd_count"="downed wood count", "avg_volume"="wood volume", "soil_moist"="soil moisture",
"decay_cl"="decay class", "days_since_rain"="days since rain", "canopy_cov"="canopy cover",
"veg_cov"="veg cover")
ossForestData.corr$Var.Names <- new_names[ossForestData.corr$Var.Names]
#ggplot
p6 <- ggplot(ossForestData.corr, aes(x = Var.Names, y = MeanDec)) +
geom_segment(aes(x = Var.Names, xend = Var.Names, y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "#66C2A5", "<10" = "#FFD700")) +
labs(color = "Range", size = "Node Purity") +
theme(
text = element_text(size = 20)
) +
labs(
title = "Variable Importance from Random Forest Model - OSS",
x = "Environmental Variables",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
p6
new_names <- c("size_cl"="size class", "temp"="temp", "aspect"="aspect", "char_cl"="char class",
"precip_mm"="precip", "fwd_cov"="fine woody debris", "dwd_cov"="dwd cover",
"dwd_count"="dwd count", "avg_volume"="dwd volume", "soil_moist"="soil moisture",
"decay_cl"="decay class", "days_since_rain"="days since rain", "canopy_cov"="canopy cover",
"veg_cov"="veg cover")
ossForestData.corr$Var.Names <- new_names[ossForestData.corr$Var.Names]
#ggplot
p6 <- ggplot(ossForestData.corr, aes(x = Var.Names, y = MeanDec)) +
geom_segment(aes(x = Var.Names, xend = Var.Names, y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "#66C2A5", "<10" = "#FFD700")) +
labs(color = "Range", size = "Node Purity") +
theme(
text = element_text(size = 20)
) +
labs(
title = "Variable Importance from Random Forest Model - OSS",
x = "Environmental Variables",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
p6
new_names <- c("size_cl"="size class", "temp"="temp", "aspect"="aspect", "char_cl"="char class",
"precip_mm"="precip", "fwd_cov"="fine woody debris", "dwd_cov"="dwd cover",
"dwd_count"="dwd count", "avg_volume"="dwd volume", "soil_moist"="soil moisture",
"decay_cl"="decay class", "days_since_rain"="days since rain", "canopy_cov"="canopy cover",
"veg_cov"="veg cover")
ossForestData.corr$Var.Names <- new_names[ossForestData.corr$Var.Names]
#ggplot
p6 <- ggplot(ossForestData.corr, aes(x = Var.Names, y = MeanDec)) +
geom_segment(aes(x = Var.Names, xend = Var.Names, y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "#66C2A5", "<10" = "#FFD700")) +
labs(color = "Range", size = "Node Purity") +
theme(
text = element_text(size = 20)
) +
labs(
title = "Variable Importance from Random Forest Model - OSS",
x = "Environmental Variables",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
p6
View(ossForestData.corr)
ossForestData.corr <- as.data.frame(importance(oss.forest.corr))
ossForestData.corr <- ossForestData.corr[order(ossForestData.corr[,1]),]
ossForestData.corr$Var.Names <- row.names(ossForestData.corr)
colnames(ossForestData.corr) <- c("Absent","Present","MeanDec","IncNodePurity","Var.Names")
new_names <- c("size_cl"="size class", "temp"="temp", "aspect"="aspect", "char_cl"="char class",
"precip_mm"="precip", "fwd_cov"="fine woody debris", "dwd_cov"="dwd cover",
"dwd_count"="dwd count", "avg_volume"="dwd volume", "soil_moist"="soil moisture",
"decay_cl"="decay class", "days_since_rain"="days since rain", "canopy_cov"="canopy cover",
"veg_cov"="veg cover")
ossForestData.corr$Var.Names <- new_names[ossForestData.corr$Var.Names]
#ggplot
p6 <- ggplot(ossForestData.corr, aes(x = Var.Names, y = MeanDec)) +
geom_segment(aes(x = Var.Names, xend = Var.Names, y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "#66C2A5", "<10" = "#FFD700")) +
labs(color = "Range", size = "Node Purity") +
theme(
text = element_text(size = 20)
) +
labs(
title = "Variable Importance from Random Forest Model - OSS",
x = "Environmental Variables",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
p6
#ggplot
p6 <- ggplot(ossForestData.corr, aes(x = Var.Names, y = MeanDec)) +
geom_segment(aes(x = Var.Names, xend = Var.Names, y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "forestgreen", "<10" = "orange")) +
labs(color = "Importance Level", size = "Node Purity") +
theme(
text = element_text(size = 24),
plot.title = element_text(size = 28, face = "bold"),
axis.title = element_text(size = 26),
legend.text = element_text(size = 22),
legend.title = element_text(size = 24)
) +
labs(
title = "Variable Importance from Random Forest Model - OSS",
x = "Environmental Variables",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
p6
#ggplot
p6 <- ggplot(ossForestData.corr, aes(x = Var.Names, y = MeanDec)) +
geom_segment(aes(x = Var.Names, xend = Var.Names, y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "forestgreen", "<10" = "orange")) +
labs(color = "Importance Level", size = "Node Purity") +
theme(
text = element_text(size = 24),
plot.title = element_text(size = 28, face = "bold"),
axis.title = element_text(size = 26),
legend.text = element_text(size = 22),
legend.title = element_text(size = 24)
) +
labs(
title = "Variable Importance from Random Forest Model - OSS",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
p6
#ggplot
p6 <- ggplot(ossForestData.corr, aes(x = Var.Names, y = MeanDec)) +
geom_segment(aes(x = Var.Names, xend = Var.Names, y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "forestgreen", "<10" = "orange")) +
labs(color = "Importance Level", size = "Node Purity") +
theme(
text = element_text(size = 24),
plot.title = element_text(size = 28, face = "bold"),
axis.title = element_text(size = 26),
legend.text = element_text(size = 22),
legend.title = element_text(size = 24)
) +
labs(
title = "Variable Importance from Random Forest Model - OSS",
x = "",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
p6
ggsave(filename = "oss_varimp_subset_0314.png", plot = p6, device = "png",
path = "~/Library/CloudStorage/OneDrive-Personal/Documents/Academic/OSU/Git/habitat-analysis/figures/randomforest")
#ggplot
p6 <- ggplot(ossForestData.corr, aes(x = Var.Names, y = MeanDec)) +
geom_segment(aes(x = Var.Names, xend = Var.Names, y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "forestgreen", "<10" = "orange")) +
labs(color = "Importance Level", size = "Node Purity") +
theme(
text = element_text(size = 24),
plot.title = element_text(size = 28, face = "bold"),
axis.title = element_text(size = 26),
legend.text = element_text(size = 22),
legend.title = element_text(size = 24)
) +
labs(
title = "Variable Importance from Random Forest Model - BAWR",
x = "",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
ggsave(filename = "oss_varimp_subset_0314.png", plot = p6, device = "png",
path = "~/Library/CloudStorage/OneDrive-Personal/Documents/Academic/OSU/Git/habitat-analysis/figures/randomforest")
#ggplot
p6 <- ggplot(ossForestData.corr, aes(x = Var.Names, y = MeanDec)) +
geom_segment(aes(x = Var.Names, xend = Var.Names, y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "forestgreen", "<10" = "orange")) +
labs(color = "Importance Level", size = "Node Purity") +
theme(
text = element_text(size = 24),
plot.title = element_text(size = 28, face = "bold"),
axis.title = element_text(size = 26),
legend.text = element_text(size = 22),
legend.title = element_text(size = 24)
) +
labs(
title = "Random Forest Variable Importance - BAWR",
x = "",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
p6
ossForestData.corr <- ossForestData.corr[order(-ossForestData.corr$MeanDec), ]
#ggplot
p6 <- ggplot(ossForestData.corr, aes(x = Var.Names, y = MeanDec)) +
geom_segment(aes(x = Var.Names, xend = Var.Names, y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "forestgreen", "<10" = "orange")) +
labs(color = "Importance Level", size = "Node Purity") +
theme(
text = element_text(size = 24),
plot.title = element_text(size = 28, face = "bold"),
axis.title = element_text(size = 26),
legend.text = element_text(size = 22),
legend.title = element_text(size = 24)
) +
labs(
title = "Random Forest Variable Importance - BAWR",
x = "",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
p6
ossForestData.corr <- ossForestData.corr[order(-ossForestData.corr$MeanDec), ]
#ggplot
p6 <- ggplot(ossForestData.corr, aes(x = Var.Names, y = MeanDec)) +
geom_segment(aes(x = Var.Names, xend = Var.Names, y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "forestgreen", "<10" = "orange")) +
labs(color = "Importance Level", size = "Node Purity") +
theme(
text = element_text(size = 24),
plot.title = element_text(size = 28, face = "bold"),
axis.title = element_text(size = 26),
legend.text = element_text(size = 22),
legend.title = element_text(size = 24)
) +
labs(
title = "Random Forest Variable Importance - BAWR",
x = "",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
p6
p6 <- ggplot(ossForestData.corr, aes(x = reorder(Var.Names, MeanDec, FUN = min), y = MeanDec)) +
geom_segment(aes(x = reorder(Var.Names, MeanDec, FUN = min), xend = reorder(Var.Names, MeanDec, FUN = min),
y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15",
ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "#66C2A5", "<10" = "#FFD700")) +
labs(color = "Range", size = "Node Purity") +
theme(
text = element_text(size = 24),
plot.title = element_text(size = 28, face = "bold"),
axis.title.y = element_blank(),
axis.title.x = element_text(size = 26),
legend.text = element_text(size = 22),
legend.title = element_text(size = 24)
) +
labs(
title = "Variable Importance from Random Forest Model - OSS",
x = "",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
p6
#ggplot
p6 <- ggplot(ossForestData.corr, aes(x = reorder(Var.Names, MeanDec, FUN = min), y = MeanDec)) +
geom_segment(aes(x = reorder(Var.Names, MeanDec, FUN = min),
xend = reorder(Var.Names, MeanDec, FUN = min),
y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15", ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15", ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "forestgreen", "<10" = "orange")) +
labs(color = "Importance Level", size = "Node Purity") +
theme(
text = element_text(size = 24),
plot.title = element_text(size = 28, face = "bold"),
axis.title = element_text(size = 26),
legend.text = element_text(size = 22),
legend.title = element_text(size = 24)
) +
labs(
title = "Random Forest Variable Importance - BAWR",
x = "",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
p6
ggsave(filename = "oss_varimp_subset_0314.png", plot = p6, device = "png",
path = "~/Library/CloudStorage/OneDrive-Personal/Documents/Academic/OSU/Git/habitat-analysis/figures/randomforest")
#subset with env corr
enes.forest.corr <- randomForest(as.factor(enes_PA) ~ ., data=env_subset_corr, ntree = 5000, mtry = 5,
importance=TRUE, keep.forest=FALSE, na.action=na.omit)
enes.forest.corr <- as.data.frame(importance(enes.forest.corr))
enes.forest.corr <- enes.forest.corr[order(enes.forest.corr[,1]),]
enes.forest.corr$Var.Names <- row.names(enes.forest.corr)
colnames(enes.forest.corr) <- c("Absent","Present","MeanDec","IncNodePurity","Var.Names")
new_names <- c("size_cl"="size class", "temp"="temp", "aspect"="aspect", "char_cl"="char class",
"precip_mm"="precip", "fwd_cov"="fine woody debris", "dwd_cov"="dwd cover",
"dwd_count"="dwd count", "avg_volume"="dwd volume", "soil_moist"="soil moisture",
"decay_cl"="decay class", "days_since_rain"="days since rain", "canopy_cov"="canopy cover",
"veg_cov"="veg cover")
enes.forest.corr$Var.Names <- new_names[enes.forest.corr$Var.Names]
enes.forest.corr <- enes.forest.corr[order(-enes.forest.corr$MeanDec), ]
#ggplot
p7 <- ggplot(enes.forest.corr, aes(x = reorder(Var.Names, MeanDec, FUN = min), y = MeanDec)) +
geom_segment(aes(x = reorder(Var.Names, MeanDec, FUN = min),
xend = reorder(Var.Names, MeanDec, FUN = min),
y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15", ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15", ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "forestgreen", "<10" = "orange")) +
labs(color = "Importance Level", size = "Node Purity") +
theme(
text = element_text(size = 24),
plot.title = element_text(size = 28, face = "bold"),
axis.title = element_text(size = 26),
legend.text = element_text(size = 22),
legend.title = element_text(size = 24)
) +
labs(
title = "Random Forest Variable Importance - BAWR",
x = "",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
p7
#ggplot
p7 <- ggplot(enes.forest.corr, aes(x = reorder(Var.Names, MeanDec, FUN = min), y = MeanDec)) +
geom_segment(aes(x = reorder(Var.Names, MeanDec, FUN = min),
xend = reorder(Var.Names, MeanDec, FUN = min),
y = 0, yend = MeanDec,
color = ifelse(MeanDec > 15, ">15", ifelse(MeanDec >= 10, "10-15", "<10"))),
show.legend = FALSE) +
geom_point(aes(size = IncNodePurity,
color = ifelse(MeanDec > 15, ">15", ifelse(MeanDec >= 10, "10-15", "<10"))),
alpha = 0.6) +
theme_light() +
coord_flip() +
scale_color_manual(values = c(">15" = "blue", "10-15" = "forestgreen", "<10" = "orange")) +
labs(color = "Importance Level", size = "Node Purity") +
theme(
text = element_text(size = 24),
plot.title = element_text(size = 28, face = "bold"),
axis.title = element_text(size = 26),
legend.text = element_text(size = 22),
legend.title = element_text(size = 24)
) +
labs(
title = "Random Forest Variable Importance - ENES",
x = "",
y = "Mean Decrease in Accuracy",
size = "Node Purity"
)
p7
ggsave(filename = "enes_varimp_subset_0314.png", plot = p7, device = "png",
path = "~/Library/CloudStorage/OneDrive-Personal/Documents/Academic/OSU/Git/habitat-analysis/figures/randomforest")
